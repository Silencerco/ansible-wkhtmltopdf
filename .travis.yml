language: python
sudo: yes

matrix:
  include:
    - python: 2.7
      env: TOXENV=py27-ansible21
    - python: 2.7
      env: TOXENV=py27-ansible20
    - python: 2.7
      env: TOXENV=py27-ansible19

install:
  - pip install tox

script:
  - tox

notifications:
  email: false
  slack:
    template:
      - "%{repository_name}@%{branch} %{commit} : [%{build_number}] %{result} "
      - "%{build_url}"
      - "'%{commit_subject}' by %{author}"
      - "%{elapsed_time} : %{duration}"
      - "%{message}"
    rooms:
      secure: db4h//25reoK02er35YUU1V9YfcAhmiNtZW3CNmYtGKl1+F5SZrtT/c1IurnRPKvQIuXHGi+ZvGpgFOE5DLatDHRsD3vwPPNbiIG99DJK3ev1jph4BhrpId4nFa+3D4iZSP+m2V7/xHZB+jke/OA3+P6sOMjzvcUtq9F7x+XSSxnhVJYMT0NggAAaSK0PrcGeYgY9Tf8jPrT6KgDZEjQzvagdlrYGWX3BbE6XP7SgIr5vD/y5uiBa68NdGCdk1zMnFZYm56Cx8kcBSIDSkJROiG3XwoX2SCI54HdDY0xNWtn5wwMV5zG3ah5J33P6+uHslKnYYsFytKgupN1G5DVZWdttc0rRdHC+DTP6cUN2oMAkLQK1cxJoFhB3nl3hRVqzy4oiWLpxoy/nhv8vbDItqE3BNLr4XBQvyOwKwZ2QtRGPX6dO2V8uAhzJvO4GC0QfZJwUqUX44EWe0vJzgYoOTXTEqKvX7Awz/NRW8DV9Xfjzo3Y6gVxVDEaqQHk2+mzFu7bbOltiuez9f5dsFF3Wqztk9T/3KNC3F2SSaBQzt52g+B0ePh9tBQwURZf3HzEps4ZgIfYNgqdiaEYABhZrEM3bJcnZXtJnOxN0jKAv1xzHUT2pY9TjHZNdkVwDZxMo4esLfNjSQPcozKYuuja+8Kth5+eHb827Kvj+RK5VRI=
    on_success: always
    on_failure: always
  webhooks: https://galaxy.ansible.com/api/v1/notifications/

before_cache:
  - rm -f ${HOME}/.cache/pip/log/debug.log

cache:
  directories:
    - ${HOME}/.cache/pip

